<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>React Libraries Test</title>
  <!-- Load the NovuSessionInterceptor script first -->
  <script src="./src/novu-session-interceptor.js"></script>
  <!-- React and ReactDOM are now included in the bundle -->
  <script src="./dist/react-libs.umd.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }
    .section {
      margin-bottom: 30px;
      padding: 20px;
      border: 1px solid #ddd;
      border-radius: 8px;
    }
    h1 {
      color: #333;
    }
    h2 {
      color: #555;
    }
    button {
      padding: 10px 15px;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      margin-right: 10px;
      margin-bottom: 10px;
    }
    button:hover {
      background-color: #45a049;
    }
    pre {
      background-color: #f5f5f5;
      padding: 10px;
      border-radius: 4px;
      overflow-x: auto;
    }
    .config-form {
      margin-bottom: 15px;
    }
    .form-group {
      margin-bottom: 10px;
    }
    label {
      display: inline-block;
      width: 150px;
      font-weight: bold;
    }
    input[type="text"], select {
      padding: 8px;
      width: 300px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <h1>React Libraries Test</h1>
  
  <div class="section">
    <h2>ReactHotToast Library</h2>
    <div id="toast-container"></div>
    <button onclick="showSuccessToast()">Show Success Toast</button>
    <button onclick="showErrorToast()">Show Error Toast</button>
    <button onclick="showLoadingToast()">Show Loading Toast</button>
    <button onclick="dismissAllToasts()">Dismiss All</button>
    <pre id="toast-output">Check if window.ReactHotToast exists: <span id="toast-check"></span></pre>
  </div>
  
  <div class="section">
    <h2>NovuReact Library</h2>
    <div id="novu-container"></div>
    <pre id="novu-output">Check if window.NovuReact exists: <span id="novu-check"></span></pre>
  </div>
  
  <div class="section">
    <h2>Novu Inbox Component (Keyless Mode)</h2>
    <div id="inbox-container"></div>
    <button onclick="renderInbox()">Render Inbox</button>
    <pre id="inbox-output">Check if window.NovuReact.Inbox exists: <span id="inbox-check"></span></pre>
  </div>
  
  <div class="section">
    <h2>Novu Inbox Component (With Styling Options)</h2>
    <div id="real-inbox-container"></div>
    <div class="config-form">
    <div class="form-group">
      <label for="color-scheme">Color Scheme:</label>
      <select id="color-scheme">
        <option value="light">Light</option>
        <option value="dark">Dark</option>
      </select>
    </div>
    <div class="form-group">
      <label for="placement">Placement:</label>
      <select id="placement">
        <option value="bottom-end">Bottom End</option>
        <option value="bottom-start">Bottom Start</option>
        <option value="top-end">Top End</option>
        <option value="top-start">Top Start</option>
      </select>
    </div>
    </div>
    <div class="button-group">
      <button onclick="renderRealInbox()">Render Styled Inbox</button>
      <button onclick="clearInbox()">Clear Inbox</button>
    </div>
    <pre>
Styling options for the Inbox component:
- colorScheme: "light" or "dark"
- placement: "bottom-end", "bottom-start", "top-end", or "top-start"
- appearance: Customize the appearance of the Inbox component
- styles: Custom styles for specific elements
- i18n: Custom text for "Powered by" and other labels
- localization: Custom text for filter labels and other UI elements

Note: This implementation uses the Inbox component directly without NovuProvider.
For a real implementation with notifications, you would need to wrap the Inbox
component with NovuProvider in your application code.
    </pre>
  </div>
  
  <div class="section">
    <h2>Combined ReactLibs Object</h2>
    <pre id="combined-output">Check if window.ReactLibs exists: <span id="combined-check"></span></pre>
  </div>
  
  <div class="section">
    <h2>PersistentNovu (Removed)</h2>
    <pre>PersistentNovu has been removed to reduce bundle size.</pre>
  </div>
  
  <div class="section">
    <h2>NovuSessionInterceptor</h2>
    <button onclick="testNovuSessionInterceptor()">Test NovuSessionInterceptor</button>
    <pre id="session-interceptor-output">Check if window.ReactLibs.NovuSessionInterceptor exists: <span id="session-interceptor-check"></span></pre>
  </div>

  <script>
    // Ensure NovuSessionInterceptor is added to ReactLibs
    if (window.NovuSessionInterceptor && window.ReactLibs) {
      window.ReactLibs.NovuSessionInterceptor = window.NovuSessionInterceptor;
    }
    
    // Check if libraries are exposed to window
    document.getElementById('toast-check').textContent = window.ReactHotToast ? 'Yes ✅' : 'No ❌';
    document.getElementById('novu-check').textContent = window.NovuReact ? 'Yes ✅' : 'No ❌';
    document.getElementById('combined-check').textContent = window.ReactLibs ? 'Yes ✅' : 'No ❌';
    document.getElementById('inbox-check').textContent = window.NovuReact && window.NovuReact.Inbox ? 'Yes ✅' : 'No ❌';
    document.getElementById('session-interceptor-check').textContent = window.ReactLibs && window.ReactLibs.NovuSessionInterceptor ? 'Yes ✅' : 'No ❌';
    
    // Display available properties
    if (window.ReactHotToast) {
      document.getElementById('toast-output').innerHTML += '<br><br>Available properties:<br>' + 
        Object.keys(window.ReactHotToast).join(', ');
    }
    
    if (window.NovuReact) {
      document.getElementById('novu-output').innerHTML += '<br><br>Available properties:<br>' + 
        Object.keys(window.NovuReact).join(', ');
    }
    
    if (window.ReactLibs) {
      document.getElementById('combined-output').innerHTML += '<br><br>Available libraries:<br>' + 
        Object.keys(window.ReactLibs).join(', ');
    }
    
    // Initialize toast container
    if (window.ReactHotToast && window.ReactLibs) {
      const toastContainer = document.getElementById('toast-container');
      window.ReactLibs.ReactHotToast.renderToaster(toastContainer);
    }
    
    // Function to render the Inbox component in keyless mode
    function renderInbox() {
      if (window.NovuReact && window.NovuReact.renderInbox) {
        const inboxContainer = document.getElementById('inbox-container');
        window.NovuReact.renderInbox(inboxContainer);
      }
    }
    
    // Function to render the Inbox component directly without NovuProvider
    function renderRealInbox() {
      if (window.NovuReact && window.NovuReact.renderInbox) {
        const inboxContainer = document.getElementById('real-inbox-container');
        
        // Get values from input fields
        const colorScheme = document.getElementById('color-scheme').value;
        const placement = document.getElementById('placement').value;
        
        // Configure the Inbox component
        const config = {
          colorScheme: colorScheme,
          placement: placement,
          // Custom appearance configuration
          appearance: {
            icons: {
              bell: function() {
                return '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 4C12.5312 4 13 4.46875 13 5V5.625C15.2812 6.0625 17 8.09375 17 10.5V11.3125C17 12.7188 17.4688 14.0938 18.3438 15.2188L18.8125 15.7812C19 16.0312 19.0312 16.3438 18.9062 16.5938C18.7812 16.8438 18.5312 17 18.25 17H5.75C5.4375 17 5.1875 16.8438 5.0625 16.5938C4.9375 16.3438 4.96875 16.0312 5.15625 15.7812L5.625 15.2188C6.5 14.0938 7 12.7188 7 11.3125V10.5C7 8.09375 8.71875 6.0625 11 5.625V5C11 4.46875 11.4375 4 12 4ZM12 7C10.0625 7 8.5 8.59375 8.5 10.5V11.3125C8.5 12.8125 8.0625 14.25 7.25 15.5H16.7188C15.9062 14.25 15.5 12.8125 15.5 11.3125V10.5C15.5 8.59375 13.9062 7 12 7ZM14 18C14 18.5312 13.7812 19.0625 13.4062 19.4375C13.0312 19.8125 12.5312 20 12 20C11.4688 20 10.9375 19.8125 10.5625 19.4375C10.1875 19.0625 10 18.5312 10 18H12H14Z" fill="#181C25"/></svg>';
              }
            },
            variables: {
              borderRadius: "8px",
              fontSize: "16px",
              colorShadow: "rgba(0, 0, 0, 0.1)",
              colorNeutral: "#1A1523",
              colorCounterForeground: "#ffffff",
              colorCounter: "#FF444F",
              colorSecondaryForeground: "#1A1523",
              colorPrimaryForeground: "#ffffff",
              colorPrimary: "#FF444F",
              colorForeground: "#181C25",
              colorBackground: "#ffffff",
            },
            elements: {
              popoverTrigger: {
                borderRadius: "50%",
                backgroundColor: "rgba(0, 0, 0, 0.04)",
              },
              bellContainer: {
                width: "24px",
                height: "24px",
              },
              bellIcon: {
                width: "24px",
                height: "24px",
              },
              preferences__button: { display: "none" },
              popoverContent: "novu-popover-content",
            },
          },
          // Custom styles configuration
          styles: {
            bell: { root: { background: "transparent", color: "black" } },
            popover: { root: { zIndex: 100 } },
          },
          // Custom i18n configuration
          i18n: {
            poweredBy: "Notifications by",
          },
          // Custom localization configuration
          localization: {
            "inbox.filters.labels.default": "Notifications"
          },
          applicationIdentifier: "",
          subscriber: "",
          subscriberHash: "",
        };
        
        window.NovuReact.renderInbox(inboxContainer, config);
      }
    }
    
    // Function to clear the inbox container
    function clearInbox() {
      const inboxContainer = document.getElementById('real-inbox-container');
      if (window.NovuReact && window.NovuReact.clearInbox) {
        window.NovuReact.clearInbox(inboxContainer);
      } else {
        inboxContainer.innerHTML = '';
      }
    }
    
    // Toast functions
    function showSuccessToast() {
      if (window.ReactHotToast) {
        window.ReactHotToast.success('This is a success toast!', {
          duration: 300000
        });
      }
    }
    
    function showErrorToast() {
      if (window.ReactHotToast) {
        window.ReactHotToast.error('This is an error toast!');
      }
    }
    
    function showLoadingToast() {
      if (window.ReactHotToast) {
        const loadingToast = window.ReactHotToast.loading('Loading...');
        setTimeout(() => {
          window.ReactHotToast.success('Loaded successfully!', { id: loadingToast });
        }, 2000);
      }
    }
    
    function dismissAllToasts() {
      if (window.ReactHotToast) {
        window.ReactHotToast.dismiss();
      }
    }
    
    
    // Test NovuSessionInterceptor
    function testNovuSessionInterceptor() {
      const output = document.getElementById('session-interceptor-output');
      if (window.ReactLibs && window.ReactLibs.NovuSessionInterceptor) {
        const sessionInterceptor = window.ReactLibs.NovuSessionInterceptor;
        output.innerHTML += '<br><br>Available methods:<br>' + 
          Object.keys(sessionInterceptor).join(', ');
        
        // Display more information if initialize method exists
        if (sessionInterceptor.initialize) {
          output.innerHTML += '<br><br>NovuSessionInterceptor.initialize is available and can be used to initialize the session interceptor.';
        }
      } else {
        output.innerHTML += '<br><br>NovuSessionInterceptor is not available.';
      }
    }
  </script>
</body>
</html>
